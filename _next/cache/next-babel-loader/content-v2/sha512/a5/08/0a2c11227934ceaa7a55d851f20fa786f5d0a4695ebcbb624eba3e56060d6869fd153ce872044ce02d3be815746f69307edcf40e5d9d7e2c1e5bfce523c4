{"ast":null,"code":"import getConfig from 'next/config';\nimport { createPureRequest } from '../../../api/request';\nimport { KEYS } from '../../../utils/constants';\nimport { createError } from '../../../utils/createError';\nimport { ptbk } from '../../../utils/ptbk';\nconst {\n  webhook_dingtalk\n} = getConfig().serverRuntimeConfig;\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb'\n    }\n  }\n};\nexport default (async (req, res) => {\n  try {\n    const request = createPureRequest({\n      baseURL: ''\n    });\n    const data = req.body.data;\n    const apiRes = await request.post(webhook_dingtalk, {\n      msgtype: 'text',\n      text: ptbk.decode(data)\n    });\n    res.end(JSON.stringify(apiRes === null || apiRes === void 0 ? void 0 : apiRes.data));\n  } catch (error) {\n    res.end(JSON.stringify({\n      [KEYS.error]: createError(error)\n    }));\n  }\n});","map":null,"metadata":{},"sourceType":"module"}