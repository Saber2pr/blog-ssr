{"ast":null,"code":"import { getHeaderAuth } from '../../api/getToken';\nimport { getOrigin } from '../../api/utils';\nimport { KEYS } from '../../utils/constants';\nimport { createError } from '../../utils/createError';\nimport { ptbk } from '../../utils/ptbk';\nimport { timeout } from '../../utils/timeout';\nexport const config = {\n  api: {\n    bodyParser: {\n      sizeLimit: '1mb'\n    }\n  }\n};\n/**\n * 捕获所有路由\n * > 用于客户端请求的反向代理\n */\n\nexport default (async (req, res) => {\n  try {\n    let data = [1, 2, 3];\n    const authorization = getHeaderAuth(req.headers);\n\n    if (authorization) {\n      data = [1, 2, 3, 4, 5, 6];\n    }\n\n    res.writeHead(200, {\n      'Access-Control-Allow-Credentials': 'true',\n      'Access-Control-Allow-Origin': getOrigin()\n    });\n    await timeout(2000);\n    const result = ptbk.encode(data);\n    res.end(JSON.stringify(result));\n  } catch (error) {\n    res.end(JSON.stringify({\n      [KEYS.error]: createError(error)\n    }));\n  }\n});","map":null,"metadata":{},"sourceType":"module"}