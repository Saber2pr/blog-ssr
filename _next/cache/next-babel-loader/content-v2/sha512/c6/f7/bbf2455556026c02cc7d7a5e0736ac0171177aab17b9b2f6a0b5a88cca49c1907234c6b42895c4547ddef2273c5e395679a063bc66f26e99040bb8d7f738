{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar __jsx = React.createElement;\n\n/*\r\n * @Author: saber2pr\r\n * @Date: 2019-06-12 10:35:34\r\n * @Last Modified by: saber2pr\r\n * @Last Modified time: 2019-10-16 22:13:09\r\n */\nimport React, { useRef, useState } from 'react';\nimport { usePreComp } from '../../hooks';\nexport var PreImg = function PreImg(_ref) {\n  var fallback = _ref.fallback,\n      _onLoad = _ref.onLoad,\n      alt = _ref.alt,\n      props = _objectWithoutProperties(_ref, [\"fallback\", \"onLoad\", \"alt\"]);\n\n  var _usePreComp = usePreComp(fallback),\n      _usePreComp2 = _slicedToArray(_usePreComp, 2),\n      defaultImg = _usePreComp2[0],\n      destory = _usePreComp2[1];\n\n  var ref = useRef();\n\n  var _useState = useState({\n    display: \"none\"\n  }),\n      style = _useState[0],\n      setStyle = _useState[1];\n\n  var visu = function visu() {\n    return setStyle({\n      display: \"inline\"\n    });\n  };\n\n  return __jsx(React.Fragment, null, defaultImg, __jsx(\"img\", _extends({}, props, {\n    style: style,\n    ref: ref,\n    onError: function onError() {\n      return ref.current.remove();\n    },\n    onLoad: function onLoad(event) {\n      destory();\n      visu();\n      _onLoad && _onLoad(event);\n    }\n  })));\n};","map":null,"metadata":{},"sourceType":"module"}