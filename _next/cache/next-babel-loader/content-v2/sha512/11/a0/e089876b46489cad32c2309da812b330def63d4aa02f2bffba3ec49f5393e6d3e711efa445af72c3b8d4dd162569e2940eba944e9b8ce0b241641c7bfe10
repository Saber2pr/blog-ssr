{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nconst map = new Map();\nexport const useLoadScript = (name, src, deps = []) => {\n  const ref = useRef();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n\n  const loadLib = () => {\n    const cache = map.get(name) || {};\n    cache.lib = window[name];\n    map.set(name, cache);\n    ref.current = cache.lib;\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    const cache = map.get(name) || {};\n\n    if (cache.lib) {\n      ref.current = cache.lib;\n      setLoading(false);\n      return;\n    }\n\n    if (cache.dom) {\n      cache.dom.addEventListener('load', loadLib);\n      return () => cache.dom.removeEventListener('load', loadLib);\n    }\n\n    const script = document.createElement('script');\n    script.src = src;\n    script.type = 'text/javascript';\n    script.crossOrigin = 'true';\n    script.addEventListener('load', loadLib);\n    document.body.append(script);\n    cache.dom = script;\n    map.set(name, cache);\n    return () => script.removeEventListener('load', loadLib);\n  }, deps);\n  return [ref.current, loading];\n};","map":null,"metadata":{},"sourceType":"module"}