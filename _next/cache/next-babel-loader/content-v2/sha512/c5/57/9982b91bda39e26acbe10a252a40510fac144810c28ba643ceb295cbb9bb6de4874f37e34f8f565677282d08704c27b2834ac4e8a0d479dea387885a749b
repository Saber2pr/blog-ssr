{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\n\nconst useEchartsLib = () => {\n  const {\n    0: lib,\n    1: setLib\n  } = useState(null);\n  useEffect(() => {\n    import('echarts').then(echarts => setLib(echarts));\n  }, []);\n  return lib;\n};\n\nexport function useEcharts(options, deps = []) {\n  const ref = useRef();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const echarts = useEchartsLib();\n  useEffect(() => {\n    if (options === null) {\n      return;\n    }\n\n    setLoading(true);\n    let chart = null;\n\n    if (echarts) {\n      chart = echarts.init(ref.current);\n\n      if (typeof options === 'function') {\n        Promise.resolve(options(chart)).then(() => setLoading(false));\n      } else {\n        chart.setOption(options);\n        setLoading(false);\n      }\n    }\n\n    return () => {\n      if (chart) {\n        chart.dispose();\n      }\n    };\n  }, [echarts, ...deps]);\n  return [ref, loading];\n}","map":null,"metadata":{},"sourceType":"module"}